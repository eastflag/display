/**
 *
 {
 "GoodsNo": null,
 "SiteGoodsNo": null,
 "IsIacSellingStatus": "0",
 "IsIacSellingStatusSpecified": false,
 "CommandType": "1",
 "IsLeaseAllowedInIac": false,
 "CallFrom": "0",
 "SYIStep1": {
      "RegMarketType": "0",
      "SiteSellerId": [
        {
          "key": "1",
          "value": "conbus"
        },
        {
          "key": "2",
          "value": "conbus"
        }
      ],
      "CatalogId": "0",
      "CatalogName": "",
      "CatalogLowestPrice": "0",
      "SellType": "1",
      "GoodsType": "1",
      "GoodsName": {
        "InputType": "1",
        "GoodsName": "인테리어 이태리 스타일 의자 편리한 쿠션 안락한 사용",
        "GoodsNameSearch": "인테리어 이태리 스타일 의자",
        "GoodsNamePrmt": "편리한 쿠션 안락한 사용",
        "SiteGoodsName": [],
        "SiteGoodsNameEng": [
          {
            "key": "1",
            "value": ""
          },
          {
            "key": "2",
            "value": ""
          }
        ],
        "SiteGoodsNameChn": [
          {
            "key": "1",
            "value": ""
          },
          {
            "key": "2",
            "value": ""
          }
        ],
        "SiteGoodsNameJpn": [
          {
            "key": "1",
            "value": ""
          },
          {
            "key": "2",
            "value": ""
          }
        ],
        "UseSellerNicknameIac": false,
        "AdMessageIac": ""
      },
      "SiteCategoryCode": [
        {
          "key": "1",
          "value": "27161300"
        },
        {
          "key": "2",
          "value": "100000031200000796300008706"
        }
      ],
      "SiteGoodsClassList": [
        {
          "key": "1",
          "value": ""
        },
        {
          "key": "2",
          "value": ""
        }
      ],
      "Book": {
        "STCode": "",
        "ISBNCode": "",
        "Name": "",
        "Author": "",
        "Publisher": "",
        "Price": "",
        "PublishDate": "",
        "MakerName": "",
        "MakerNo": "",
        "BrandName": "",
        "BrandNo": "",
        "IsbnCodeAllowYn": ""
      },
      "MakerId": "0",
      "MakerName": "",
      "UserDefineMakerName": "",
      "BrandId": "0",
      "BrandName": "",
      "UserDefineBrandName": "",
      "GmktShopKind1": "-1",
      "GmktShopKind2": "-1",
      "GmktShopKind3": "-1",
      "StatusCode": "",
      "StoreShopCategoryGoods": {
        "CategoryLevel": "0",
        "ShopLCategoryCode": "00000000",
        "ShopMCategoryCode": "00000000",
        "ShopSCategoryCode": "00000000"
      },
      "MiniShopCategoryGoods": {
        "CategoryLevel": "0",
        "ShopLCategoryCode": "00000000",
        "ShopMCategoryCode": "00000000",
        "ShopSCategoryCode": "00000000"
      },
      "IsTPLGoods": false,
      "AdminRestrict": "",
      "SiteSellerAdjustCommissionPrice": {
        "IacOpenAdjustCommissionPrice": "0",
        "IacSpecialAdjustCommissionPrice": "0",
        "GmktOpenAdjustCommissionPrice": "0",
        "GmktSpecialAdjustCommissionPrice": "0"
      },
      "CatalogInfo": {
        "CatalogId": "0",
        "CatalogIdSpecified": false,
        "CatalogName": null,
        "LowestPrice": "0",
        "LowestPriceSpecified": false,
        "ImageUrl": null,
        "MakerId": "0",
        "MakerIdSpecified": false,
        "MakerName": null,
        "BrandId": "0",
        "BrandIdSpecified": false,
        "BrandName": null,
        "ModelName": null,
        "MainDescription": null,
        "MatchingItemCount": "0",
        "MatchingItemCountSpecified": false,
        "ProductionDate": null,
        "ProductionDateSpecified": false,
        "ProductionDateType": "0",
        "ProductionDateTypeSpecified": false,
        "PriceRenovationDate": null,
        "PriceRenovationDateSpecified": false,
        "IsAdult": false,
        "IsAdultSpecified": false,
        "IsBook": false,
        "IsBookSpecified": false
      }
    },
 "SYIStep2": {
      "SellingStatus": "0",
      "GoodsStatus": "1",
      "UsedMonths": "",
      "IsGMKTEnvironmentFriendlyCertType": false,
      "IsIACEnvironmentFriendlyCertType": false,
      "Price": {
        "InputType": "1",
        "GoodsPrice": "100000",
        "GoodsPriceIAC": "",
        "GoodsPriceGMKT": "",
        "IsUserCustomSettlementGMKT": false,
        "GoodsPriceSettlementGMKT": "0",
        "BookPrice": "0",
        "OrgGoodsPrice": "0"
      },
      "PricePerUnit": {
        "Unit": null,
        "UnitPrice": "0"
      },
      "WirelessCallingPlan": {
        "PhoneFeeType": "0",
        "PhoneFeeUrl": "",
        "Plans": [],
        "MobilePhoneFeeUrl": ""
      },
      "MobileDevicePrice": {
        "PhoneDevicePrice": "",
        "PhoneSupportDiscount": "",
        "MakerSupportDiscount": "",
        "TeleComSupportDiscount": "",
        "PhoneAddDiscount": "",
        "PhoneInstallmentPrice": ""
      },
      "Stock": {
        "InputType": "2",
        "GoodsCount": "400",
        "SiteGoodsCountNo": "0",
        "BuyableQuantityType": "0",
        "BuyableQuantity": "",
        "BuyableQuantityDay": "",
        "GoodsCountIAC": "200",
        "GoodsCountGMKT": "200",
        "OldGoodsCount": "0",
        "OldGoodsCountIAC": "0",
        "OldGoodsCountGMKT": "0"
      },
      "Options": {
        "InputType": "1",
        "OptVerType": "0",
        "OptVerTypeIAC": "0",
        "OptVerTypeGMKT": "0",
        "JsonData": null,
        "JsonDataIAC": null,
        "JsonDataGMKT": null,
        "JsonDataLegacy": null
      },
      "OrderOption": {
        "OptType": "1",
        "StockMngIs": true,
        "UnifyStockIs": false,
        "OptionNameInfo": {
          "OptName1": "색상",
          "RcmdOptNo1": "1",
          "OptionNameLangList": null
        },
        "OptionInfoList": [
          {
            "OptType": "1",
            "OptValue1": "그린",
            "RcmdOptValueNo1": "19391",
            "SellerStockCode": null,
            "SkuMatchingVerNo": "",
            "OptionValueLangList": null,
            "SiteOptionInfo": [
              {
                "SiteId": "1",
                "ExposeYn": "Y",
                "SoldOutYn": "N",
                "StockQty": "100"
              },
              {
                "SiteId": "2",
                "ExposeYn": "Y",
                "SoldOutYn": "N",
                "StockQty": "100"
              }
            ],
            "SkuList": []
          },
          {
            "OptType": "1",
            "OptValue1": "블루",
            "RcmdOptValueNo1": "19396",
            "SellerStockCode": null,
            "SkuMatchingVerNo": "",
            "OptionValueLangList": null,
            "SiteOptionInfo": [
              {
                "SiteId": "1",
                "ExposeYn": "Y",
                "SoldOutYn": "N",
                "StockQty": "100"
              },
              {
                "SiteId": "2",
                "ExposeYn": "Y",
                "SoldOutYn": "N",
                "StockQty": "100"
              }
            ],
            "SkuList": []
          }
        ]
      },
      "Additions": {
        "InputType": "1",
        "JsonData": null,
        "JsonDataIAC": null,
        "JsonDataGMKT": null,
        "JsonDataLegacy": null,
        "CommonGoodsNo": null,
        "IsUseCommonGoods": false
      },
      "AddonService": {
        "AddonServiceUseType": "0",
        "AddonServiceList": []
      },
      "SellingPeriod": {
        "IAC": {
          "StartDate": "2020-05-03 00:00:00",
          "EndDate": "2020-08-01 23:59:59"
        },
        "GMKT": {
          "StartDate": "2020-05-03 00:00:00",
          "EndDate": "2020-08-01 23:59:59"
        },
        "History": []
      },
      "PreSale": {
        "UseSettingIAC": false,
        "SaleStartDateIAC": "2020-05-08"
      },
      "GoodsImage": {
        "AdditionalImages": [
          {
            "Operation": "1",
            "Url": "http://image.esmplus.com/c/20200503/15/78ce40a882314bbe/0",
            "BigImage": "false",
            "ImageSourceCode": "0",
            "ImageSourceOriginId": ""
          }
        ],
        "PrimaryImage": {
          "Operation": "1",
          "Url": "http://image.esmplus.com/c/20200503/15/9d3f57295fc24a7c/0",
          "BigImage": "false",
          "ImageSourceCode": "0",
          "ImageSourceOriginId": ""
        },
        "FixedImage": {
          "Operation": "1",
          "Url": "http://image.esmplus.com/c/20200503/15/9d3f57295fc24a7c/0",
          "BigImage": "false",
          "ImageSourceCode": "0",
          "ImageSourceOriginId": ""
        },
        "AdditionalImagesSite": "0",
        "AdditionalImagesStr": "[{\"Operation\":1,\"Url\":\"http://image.esmplus.com/c/20200503/15/78ce40a882314bbe/0\",\"BigImage\":\"false\",\"ImageSourceCode\":\"0\",\"ImageSourceOriginId\":\"\"}]"
      },
      "DescriptionType": "2",
      "DescriptionTypeSpecified": false,
      "Description": {
        "InputType": "1",
        "Text": "NewJpn",
        "TextIAC": "",
        "TextGMKT": ""
      },
      "NewDescription": {
        "InputType": "1",
        "Text": "%3Cdiv%20class%3D%22ee-contents%22%3E%3Cp%20class%3D%22%22%3E%EC%9D%98%EC%9E%90%EC%9E%85%EB%8B%88%EB%8B%A4.%3C%2Fp%3E%3Cp%3E%3Cbr%3E%3C%2Fp%3E%3Cp%3E%3Cbr%3E%3C%2Fp%3E%3C%2Fdiv%3E",
        "TextEng": "",
        "TextChn": "",
        "TextJpn": "",
        "TextIAC": "",
        "TextGMKT": "",
        "OuterShareYn": "N",
        "OuterShareUrl": "",
        "OuterShareNew": false,
        "Height": "1183"
      },
      "ItemCode": "1234567890",
      "CustCategoryNo": "0",
      "CustCategory": null,
      "ExpiryDate": null,
      "ExpiryDateSpecified": false,
      "ManufacturedDate": null,
      "ManufacturedDateSpecified": false,
      "LaunchingDate": null,
      "LaunchingDateSpecified": false,
      "Origin": {
        "ProductType": "",
        "Type": "0",
        "Name": "",
        "Code": "",
        "IsMultipleOrigin": "false"
      },
      "LegacyRawMaterials": "null",
      "RawMaterials": "null",
      "Capacity": {
        "Volume": null,
        "Unit": "0",
        "IsMultipleVolume": false
      },
      "Manual": null,
      "ECoupon": {
        "MoneyType": "0",
        "Price": "0",
        "Ratio": "0",
        "CouponName": null,
        "ExpireType": "0",
        "Expire1StartDate": "2020-05-03T06:27:59.633Z",
        "Expire1EndDate": "2020-05-03T06:27:59.633Z",
        "Expire2Start": "0",
        "Expire2Duration": "0",
        "UseTermType": "0",
        "UseTerm1StartDate": "2020-05-03T06:27:59.633Z",
        "UseTerm1EndDate": "2020-05-03T06:27:59.633Z",
        "UseTerm2Start": "0",
        "UseTerm2Duration": "0",
        "isDiffDate": false,
        "CouponTemplate": "0",
        "CouponImageUrl": null,
        "DownloadTemplate": "0",
        "DownloadImageUrl": null,
        "ApplyPlace": null,
        "ApplyPlaceKind": "BranchAddress",
        "AddressNo": null,
        "IsInformByAddress": false,
        "Address": null,
        "IsInformByURL": false,
        "URL": null,
        "ApplyPlacePriority": "0",
        "MobileUseInfo": null,
        "MobileHelpDeskphoneNo": null,
        "TelephoneNo": null,
        "AdditionalBenefit": null,
        "HasRestrictCondition": false,
        "RestrictCondition": null,
        "Guide": null,
        "PublicationCorp": null,
        "PublicationCorpURL": null,
        "IsCustomerNameView": false,
        "Period": "0"
      },
      "DeliveryInfo": {
        "CommonDeliveryUseYn": true,
        "InvalidDeliveryInfo": false,
        "CommonDeliveryWayOPTSEL": "1",
        "GmktDeliveryWayOPTSEL": "0",
        "IsCommonGmktUnifyDelivery": false,
        "GmktDeliveryCOMP": "100000014",
        "IacDeliveryCOMP": "10001",
        "IsCommonVisitTake": false,
        "IsCommonQuickService": false,
        "IsCommonIACPost": false,
        "CommonIACPostType": "0",
        "CommonIACPostPaidPrice": "0",
        "IsGmktVisitTake": false,
        "IsGmktQuickService": false,
        "IsGmktTodayDEPAR": false,
        "IsGmktTodayDEPARAgree": false,
        "IsGmktVisitReceiptTier": false,
        "MountBranchGroupSeq": "0",
        "CommonVisitTakeType": "0",
        "CommonVisitTakePriceDcAmnt": "0",
        "CommonVisitTakeFreeGiftName": null,
        "CommonVisitTakeADDRNo": null,
        "CommonQuickServiceCOMPName": null,
        "CommonQuickServicePhone": null,
        "CommonQuickServiceDeliveryEnableRegionNo": null,
        "ShipmentPlaceNo": "1229293",
        "DeliveryFeeType": "1",
        "BundleDeliveryYNType": "2",
        "BundleDeliveryTempNo": "4795845",
        "EachDeliveryFeeType": null,
        "EachDeliveryFeeQTYEachGradeType": null,
        "DeliveryFeeTemplateJSON": "{\"DeliveryFeeType\":0, \"DeliveryFeeSubType\":0, \"FeeAmnt\":0, \"PrepayIs\":false, \"CodIs\":false, \"JejuAddDeliveryFee\":3000, \"BackwoodsAddDeliveryFee\":6000, \"ShipmentPlaceNo\":1229293, \"DetailList\":[]}",
        "EachDeliveryFeePayYn": null,
        "IsCommonGmktEachADDR": false,
        "ReturnExchangeADDRNo": "1823897",
        "OldReturnExchangeADDR": null,
        "OldReturnExchangeADDRTel": null,
        "OldReturnExchangeSetupDeliveryCOMPName": null,
        "OldReturnExchangeDeliveryFeeStr": null,
        "ExchangeADDRNo": "",
        "ReturnExchangeSetupDeliveryCOMP": null,
        "ReturnExchangeSetupDeliveryCOMPName": null,
        "ReturnExchangeDeliveryFee": "0",
        "ReturnExchangeDeliveryFeeStr": "",
        "IacTransPolicyNo": "594424",
        "GmktTransPolicyNo": "594426",
        "IsGmktIACPost": false
      },
      "IsAdultProduct": "False",
      "IsVATFree": "False",
      "ASInfo": null,
      "CertIAC": {
        "HasIACCertType": false,
        "MedicalInstrumentCert": {
          "ItemLicenseNo": null,
          "AdDeliberationNo": null,
          "IsUse": false,
          "CertificationOfficeName": null,
          "CertificationNo": null,
          "Operation": "1"
        },
        "BroadcastEquipmentCert": {
          "BroadcastEquipmentIs": false,
          "AddtionalConditionIs": false,
          "IsUse": false,
          "CertificationOfficeName": null,
          "CertificationNo": "",
          "Operation": "1"
        },
        "FoodCert": {
          "IsUse": false,
          "CertificationOfficeName": null,
          "CertificationNo": null,
          "Operation": "1"
        },
        "HealthFoodCert": {
          "AdDeliberationNo": null,
          "IsUse": false,
          "CertificationOfficeName": null,
          "CertificationNo": null,
          "Operation": "1"
        },
        "EnvironmentFriendlyCert": {
          "CertificationType": "ENV_DTL",
          "isIACEnvironmentFriendlyCertType": false,
          "isGMKTEnvironmentFriendlyCertType": false,
          "CertBizType": "ENV_DTL",
          "ProducerName": null,
          "PresidentInfoNA": null,
          "RepItemName": null,
          "InfoHT": null,
          "CertGroupType": null,
          "InfoEM": null,
          "CertStartDate": null,
          "CertEndDate": null,
          "InfoAD": null,
          "CertificationOfficeName": null,
          "CertificationExpiration": null,
          "IsUse": false,
          "CertificationNo": null,
          "Operation": "1"
        },
        "SafeCert": {
          "SafeCertType": "0",
          "AuthItemType": "0",
          "CertificationNo": null,
          "IsUse": false,
          "CertificationOfficeName": null,
          "Operation": "1"
        },
        "ChildProductSafeCert": {
          "SafeCertType": "0",
          "ChangeType": "0",
          "SafeCertDetailInfoList": []
        },
        "IntegrateSafeCert": {
          "ItemNo": null,
          "IntegrateSafeCertGroupList": [
            {
              "SafeCertGroupNo": "1",
              "CertificationType": "1"
            },
            {
              "SafeCertGroupNo": "2",
              "CertificationType": "1"
            },
            {
              "SafeCertGroupNo": "3",
              "CertificationType": "1"
            }
          ]
        }
      },
      "CertificationNoGMKT": "",
      "LicenseSeqGMKT": [],
      "OfficialNotice": {
        "NoticeItemGroupNo": "35",
        "NoticeItemCodes": [
          {
            "NoticeItemCode": "35-1",
            "NoticeItemValue": "상세페이지 참조"
          },
          {
            "NoticeItemCode": "35-2",
            "NoticeItemValue": "상세페이지 참조"
          },
          {
            "NoticeItemCode": "35-3",
            "NoticeItemValue": "상세페이지 참조"
          },
          {
            "NoticeItemCode": "35-4",
            "NoticeItemValue": "상세페이지 참조"
          },
          {
            "NoticeItemCode": "35-5",
            "NoticeItemValue": "상세페이지 참조"
          },
          {
            "NoticeItemCode": "35-6",
            "NoticeItemValue": "상세페이지 참조"
          },
          {
            "NoticeItemCode": "999-5",
            "NoticeItemValue": ""
          }
        ]
      },
      "ItemWeight": "0",
      "SkuList": [],
      "SkuMatchingVerNo": "0",
      "RentalAddInfo": null,
      "CertificationTextGMKT": "",
      "LicenseTextGMKT": null,
      "InventoryNo": null,
      "SingleSellerShop": null,
      "IsUseSellerFunding": null
    },
 "SYIStep3": {
      "G9RegisterCommand": "0",
      "IsG9Goods": false,
      "IsOnlyG9Goods": false,
      "SellerDiscount": {
        "DiscountAmtIac2": null,
        "DiscountAmtGmkt2": null,
        "IsUsed": "2",
        "IsUsedSpecified": false,
        "DiscountTypeSpecified": false,
        "DiscountAmtSpecified": false,
        "DiscountAmt1Specified": false,
        "DiscountAmt2": null,
        "DiscountAmt2Specified": false,
        "StartDateSpecified": false,
        "EndDateSpecified": false,
        "DiscountTypeSpecifiedIac": false,
        "StartDateSpecifiedIac": false,
        "IacEndDateSpecified": false,
        "DiscountAmtSpecifiedIac": false,
        "DiscountTypeSpecifiedGmkt": false,
        "StartDateSpecifiedGmkt": false,
        "EndDateSpecifiedGmkt": false,
        "DiscountAmtSpecifiedGmkt": false
      },
      "FreeGift": {
        "IsUsed": "2",
        "IsUsedSpecified": false,
        "IsOnly": "1",
        "IsOnlySpecified": false,
        "IacFreeGiftName": "",
        "GmkFreeGiftName": ""
      },
      "IsPcs": true,
      "IsPcsSpecified": true,
      "IacPcsCoupon": true,
      "IacPcsCouponSpecified": false,
      "GmkPcsCoupon": true,
      "GmkPcsCouponSpecified": false,
      "GmkBargain": false,
      "GmkBargainSpecified": false,
      "IacFreeWishKeyword": [],
      "IacDiscountAgreement": true,
      "IacDiscountAgreementSpecified": false,
      "GmkDiscountAgreement": true,
      "GmkDiscountAgreementSpecified": false,
      "GmkOverseaAgreementSeller": true,
      "GmkOverseaAgreementSellerSpecified": false,
      "IacBuyerBenefit": {
        "IsUsed": "2",
        "IsUsedSpecified": false,
        "StartDate": "2020-05-03T06:27:59.633Z",
        "StartDateSpecified": false,
        "EndDate": "2020-05-04T06:27:59.633Z",
        "EndDateSpecified": false,
        "IsMemberDiscount": false,
        "IsMemberDiscountSpecified": false,
        "MemberDiscountPrice": "0",
        "MemberDiscountPriceSpecified": false,
        "IsBulkDiscount": false,
        "IsBulkDiscountSpecified": false,
        "BulkDiscountQty": "0",
        "BulkDiscountQtySpecified": false,
        "BulkDiscountPrice": "0",
        "BulkDiscountPriceSpecified": false
      },
      "GmkBuyerBenefit": {
        "IsUsed": "2",
        "IsUsedSpecified": false,
        "Type": "",
        "StartDate": "2020-05-03T06:27:59.633Z",
        "StartDateSpecified": false,
        "EndDate": "2020-05-04T06:27:59.633Z",
        "EndDateSpecified": false,
        "ConditionType": "",
        "ConditionValue": "0",
        "ConditionValueSpecified": false,
        "Unit": "",
        "UnitValue": "0",
        "UnitValueSpecified": false,
        "WhoFee": ""
      },
      "IacDonation": {
        "IsUsed": "2",
        "IsUsedSpecified": false,
        "StartDate": "2020-05-03T06:27:59.633Z",
        "StartDateSpecified": false,
        "EndDate": "2020-05-04T06:27:59.633Z",
        "EndDateSpecified": false,
        "DonationPrice": "0",
        "DonationPriceSpecified": false,
        "DonationMaxPrice": "0",
        "DonationMaxPriceSpecified": false,
        "DonationType": ""
      },
      "GmkDonation": {
        "IsUsed": "2",
        "IsUsedSpecified": false,
        "StartDate": "2020-05-03T06:27:59.633Z",
        "StartDateSpecified": false,
        "EndDate": "2020-05-04T06:27:59.633Z",
        "EndDateSpecified": false,
        "DonationPrice": "0",
        "DonationPriceSpecified": false,
        "DonationMaxPrice": "0",
        "DonationMaxPriceSpecified": false,
        "DonationType": ""
      },
      "IacSellerPoint": {
        "IsUsed": "2",
        "IsUsedSpecified": false,
        "PointType": "1",
        "PointTypeSpecified": false,
        "Point": "0",
        "PointSpecified": true
      },
      "GmkSellerMileage": {
        "IsUsed": "2",
        "IsUsedSpecified": false,
        "PointType": "1",
        "PointTypeSpecified": false,
        "Point": "0",
        "PointSpecified": true
      },
      "IacChance": {
        "IsUsed": "2",
        "IsUsedSpecified": false,
        "StartDate": "2020-05-03T06:27:59.633Z",
        "StartDateSpecified": false,
        "EndDate": "2020-05-04T06:27:59.633Z",
        "EndDateSpecified": false,
        "ChanceQty": "0"
      },
      "IacBrandShop": {
        "IsUsed": "2",
        "IsUsedSpecified": false,
        "LCategoryCode": "",
        "MCategoryCode": "",
        "SCategoryCode": "",
        "BrandCode": "",
        "BrandName": "",
        "BrandImage": []
      },
      "GmkBizOn": {
        "IsUsed": "2",
        "IsUsedSpecified": false,
        "LCategoryCode": "",
        "MCategoryCode": "",
        "SCategoryCode": ""
      },
      "IacAdditional": [],
      "GmkAdditional": [],
      "IacPayWishKeyword": [],
      "IacAdPromotion": {
        "CategorySmart": {
          "LCategoryPrice": "0",
          "LCategoryPriceSpecified": false,
          "MCategoryPrice": "0",
          "MCategoryPriceSpecified": false,
          "SCategoryPrice": "0",
          "SCategoryPriceSpecified": false,
          "BestMainPrice": "0",
          "BestMainPriceSpecified": false
        },
        "CategoryPower": {
          "LCategoryPrice": "0",
          "LCategoryPriceSpecified": false,
          "MCategoryPrice": "0",
          "MCategoryPriceSpecified": false,
          "SCategoryPrice": "0",
          "SCategoryPriceSpecified": false,
          "BestMainPrice": "0",
          "BestMainPriceSpecified": false
        },
        "Best100Smart": {
          "LCategoryPrice": "0",
          "LCategoryPriceSpecified": false,
          "MCategoryPrice": "0",
          "MCategoryPriceSpecified": false,
          "SCategoryPrice": "0",
          "SCategoryPriceSpecified": false,
          "BestMainPrice": "0",
          "BestMainPriceSpecified": false
        },
        "Chance": {
          "LCategoryPrice": "0",
          "LCategoryPriceSpecified": false,
          "MCategoryPrice": "0",
          "MCategoryPriceSpecified": false,
          "SCategoryPrice": "0",
          "SCategoryPriceSpecified": false,
          "BestMainPrice": "0",
          "BestMainPriceSpecified": false
        },
        "AccessMode": "1",
        "AccessModeSpecified": false
      },
      "GmkAdPromotion": {
        "LargePlus": "0",
        "LargePlusSpecified": false,
        "LargePowerMini": "0",
        "LargePowerMiniSpecified": false,
        "LargeBestPower": "0",
        "LargeBestPowerSpecified": false,
        "MiddlePlus": "0",
        "MiddlePlusSpecified": false,
        "MiddlePower": "0",
        "MiddlePowerSpecified": false,
        "MiddleDetailPower": "0",
        "MiddleDetailPowerSpecified": false,
        "MiddleBestPower": "0",
        "MiddleBestPowerSpecified": false,
        "SmallPlus": "0",
        "SmallPlusSpecified": false,
        "SmallPower": "0",
        "SmallPowerSpecified": false
      },
      "OverseaAgree": {
        "Gubun": "0",
        "GubunSpecified": false,
        "OverseaDisAgreeIs": true
      },
      "IsLeaseAvailableInIac": false,
      "GmktShopGroupCd": "0",
      "IsIacFreeWishKeyword": false,
      "IacFreeWishKeywordEndDate": false,
      "IacCommissionRate": "0",
      "IacCommissionRateOpenMarket": "0",
      "IacCommissionRateGroupBy": "0",
      "IsIacFeeDiscountItem": false,
      "IsDispExclude": true,
      "IsDispExcludeSpecified": false
    },
 "IsSingleGoods": false,
 "SiteGoodsNoIac": null,
 "SiteGoodsNoGmkt": null,
 "GoodsKind": "1",
 "BarCode": null,
 "IsSiteDisplayIac": false,
 "IsSiteDisplayGmkt": false,
 "SellingStatusIac": null,
 "SellingStatusGmkt": null,
 "MasterId": "448667",
 "LoginId": "conbus",
 "IsDeleteGroup": false,
 "EditorUseYn": "Y",
 "SdInfo": {
      "SdCategoryCode": "00370002000500020000",
      "SdBrandName": null,
      "SdMakerId": "0",
      "SdMakerName": null,
      "SdBrandId": "0",
      "SdProductBrandId": "0",
      "SdProductBrandName": null,
      "EpinCodeList": [],
      "SdAttrMatchingList": [],
      "SdBasicAttrMatching": {}
    },
 "BuyableQuantityMappingType": "1",
 "IsIacConvertToSingleGoods": false,
 "IsGmktConvertToSingleGoods": false,
 "AdminId": null
 }
 */
import {taobaoContentHtml} from "../utils/utils"

let getRequired = (props, key) => {
    if (!props.hasOwnProperty(key)) throw new Error(`Not Found Required Property : ${key}`)
    return props[key]
}


export class ESMCategory {
    constructor(iac, gmkt, esm) {
        this.SiteCategoryCode = [
            {
                "key": "1",
                "value": iac && iac['CategoryCode'] || null
            },
            {
                "key": "2",
                "value": gmkt && gmkt['CategoryCode'] || null
            }
        ]

        if (esm) {
            this.SdCategoryCode = esm['SDCategoryCode']
        }
    }
}

export class ESMImages {
    constructor(images) {
        this.AdditionalImages = images.map(img => {
            return {
                "Operation": "1",
                "Url":(img.indexOf('//') == 0 ? 'http:' : '') + img,
                "BigImage": "false",
                "ImageSourceCode": "0",
                "ImageSourceOriginId": ""
            }
        })
        this.PrimaryImage = this.AdditionalImages[0]
        this.FixedImage = this.AdditionalImages[0]
        this.AdditionalImages.shift()
        this.AdditionalImagesSite = "0"
        this.AdditionalImagesStr = JSON.stringify(this.AdditionalImages)
    }
}

export class ESMDelivery {
    constructor(profile) {
        mixin(this, profile)
    }
}

export class ESMOptions {
    constructor(item) {
        let json = {
            "Options": {
                "InputType": "1",
                "OptVerType": "0",
                "OptVerTypeIAC": "0",
                "OptVerTypeGMKT": "0",
                "JsonData": null,
                "JsonDataIAC": null,
                "JsonDataGMKT": null,
                "JsonDataLegacy": null
            },
            "OrderOption": {
                "OptType": "0",
                "StockMngIs": true,
                "UnifyStockIs": false,
                "OptionNameInfo": {
                    "OptName1": "",
                    "RcmdOptNo1": "1",
                    "OptionNameLangList": null
                },
                "OptionInfoList": []
            }
        }
        if (item.hasOptions) {
            let OptionNameInfo = {"OptionNameLangList": null}
            for (let idx in item.options) {
                let esmOption = item.options[idx]
                OptionNameInfo['OptName' + (idx*1 + 1)] = esmOption['ObjOptClaseName']
                OptionNameInfo['RcmdOptNo' + (idx*1 + 1)] = esmOption['ObjOptNo']
            }

            let OptionInfoList = []
            for (let optionItem of item.optionItems) {
                let info = {
                    "OptType": item.options.length == 1 ? 1 : 2,
                    "SkuMatchingVerNo": "",
                    "OptionValueLangList": null,
                    "SellerStockCode": optionItem.sku.skuId || null,
                    "SiteOptionInfo": [
                        {
                            "SiteId": "1",
                            "ExposeYn": "Y",
                            "SoldOutYn": "N",
                            "StockQty": optionItem.sku.quantity
                        },
                        {
                            "SiteId": "2",
                            "ExposeYn": "Y",
                            "SoldOutYn": "N",
                            "StockQty": optionItem.sku.quantity
                        }
                    ],
                    "SkuList": []
                }

                for (let idx in optionItem.optionValues) {
                    let optionValue = optionItem.optionValues[idx]
                    if (_.isString(optionValue)) {
                        info['OptValue' + (idx*1 + 1)] = optionValue
                        info['RcmdOptValueNo' + (idx*1 + 1)] = 0
                    } else {
                        info['OptValue' + (idx*1 + 1)] = optionValue['ObjOptEssenName']
                        info['RcmdOptValueNo' + (idx*1 + 1)] = optionValue['ObjOptClaseEssenNo']
                    }

                }

                OptionInfoList.push(info)
            }
            json['OrderOption'] = {
                "OptType": item.options.length == 1 ? 1 : 2,
                "StockMngIs": true,
                "UnifyStockIs": false,
                OptionNameInfo,
                OptionInfoList
            }
        }
        mixin(this, json)
    }
}
export class ESMDescription {
    constructor(html) {
        mixin(this, {
            "DescriptionType": "2",
            "DescriptionTypeSpecified": false,
            "Description": {
                "InputType": "1",
                "Text": "NewJpn",
                "TextIAC": "",
                "TextGMKT": ""
            },
            "NewDescription": {
                "InputType": "1",
                "Text": encodeURIComponent(html),
                "TextEng": "",
                "TextChn": "",
                "TextJpn": "",
                "TextIAC": "",
                "TextGMKT": "",
                "OuterShareYn": "N",
                "OuterShareUrl": "",
                "OuterShareNew": false,
                "Height": "1183"
            }
        })
        this.NewDescription.Text = encodeURIComponent(html)
    }
}

export class ESMProduct {
    constructor(productName, profile, props) {
        this.initUnknown()
        this.initSYIStep1(productName, props)
        this.initSYIStep2(props)
        this.initSYIStep3(props)

        for (let key in profile) {
            if (_.isObject(profile[key])) {
                mixin(this[key], profile[key])
            } else {
                this[key] = profile[key]
            }
        }


        if (!_.isArray(this['SYIStep1']['SiteSellerId']) && _.isObject(this['SYIStep1']['SiteSellerId'])) {
            let siteSellerId = []
            for (let key of Object.keys(this['SYIStep1']['SiteSellerId'])) {
                siteSellerId.push({key, value: this['SYIStep1']['SiteSellerId'][key]})
            }
            this['SYIStep1']['SiteSellerId'] = siteSellerId
        }
    }
    get json() {
        return JSON.stringify(this, (key, value) => { if (!key.startsWith('_')) return value})
    }
    initUnknown() {
        mixin(this, {
            "GoodsNo": null,
            "SiteGoodsNo": null,
            "IsIacSellingStatus": "0",
            "IsIacSellingStatusSpecified": false,
            "CommandType": "1",
            "IsLeaseAllowedInIac": false,
            "CallFrom": "0",
            "SYIStep1": {
                //from setting
                "RegMarketType": "0",
                //from setting
                "SiteSellerId": [{"key": "1", "value": "conbus"}, {"key": "2", "value": "conbus"}],
                //model
                "GoodsName": {},
                //model
                "SiteCategoryCode": [{"key": "1", "value": "27161300"}, {"key": "2", "value": "100000031200000796300008706"}],


                //여기서부터 기본 값
                "CatalogId": "0",
                "CatalogName": "",
                "CatalogLowestPrice": "0",
                "SellType": "1",
                "GoodsType": "1",
                "SiteGoodsClassList": [{"key": "1", "value": ""}, {"key": "2", "value": ""}],
                "Book": {"STCode": "", "ISBNCode": "", "Name": "", "Author": "", "Publisher": "", "Price": "", "PublishDate": "", "MakerName": "", "MakerNo": "", "BrandName": "", "BrandNo": "", "IsbnCodeAllowYn": ""},
                "MakerId": "0",
                "MakerName": "",
                "UserDefineMakerName": "",
                "BrandId": "0",
                "BrandName": "",
                "UserDefineBrandName": "",
                "GmktShopKind1": "-1",
                "GmktShopKind2": "-1",
                "GmktShopKind3": "-1",
                "StatusCode": "",
                "StoreShopCategoryGoods": {"CategoryLevel": "0", "ShopLCategoryCode": "00000000", "ShopMCategoryCode": "00000000", "ShopSCategoryCode": "00000000"},
                "MiniShopCategoryGoods": {"CategoryLevel": "0", "ShopLCategoryCode": "00000000", "ShopMCategoryCode": "00000000", "ShopSCategoryCode": "00000000"},
                "IsTPLGoods": false,
                "AdminRestrict": "",
                "SiteSellerAdjustCommissionPrice": {"IacOpenAdjustCommissionPrice": "0", "IacSpecialAdjustCommissionPrice": "0", "GmktOpenAdjustCommissionPrice": "0", "GmktSpecialAdjustCommissionPrice": "0"},
                "CatalogInfo": {"CatalogId": "0", "CatalogIdSpecified": false, "CatalogName": null, "LowestPrice": "0", "LowestPriceSpecified": false, "ImageUrl": null, "MakerId": "0", "MakerIdSpecified": false, "MakerName": null, "BrandId": "0", "BrandIdSpecified": false, "BrandName": null, "ModelName": null, "MainDescription": null, "MatchingItemCount": "0", "MatchingItemCountSpecified": false, "ProductionDate": null, "ProductionDateSpecified": false, "ProductionDateType": "0", "ProductionDateTypeSpecified": false, "PriceRenovationDate": null, "PriceRenovationDateSpecified": false, "IsAdult": false, "IsAdultSpecified": false, "IsBook": false, "IsBookSpecified": false}
            },
            "SYIStep2": {
                //model
                "Price": {"InputType": "1", "GoodsPrice": "100000", "GoodsPriceIAC": "", "GoodsPriceGMKT": "", "IsUserCustomSettlementGMKT": false, "GoodsPriceSettlementGMKT": "0", "BookPrice": "0", "OrgGoodsPrice": "0"},
                //model
                "Stock": {"InputType": "2", "GoodsCount": "400", "SiteGoodsCountNo": "0", "BuyableQuantityType": "0", "BuyableQuantity": "", "BuyableQuantityDay": "", "GoodsCountIAC": "200", "GoodsCountGMKT": "200", "OldGoodsCount": "0", "OldGoodsCountIAC": "0", "OldGoodsCountGMKT": "0"},

                "PreSale": {"UseSettingIAC": false, "SaleStartDateIAC": "2020-05-08"},
                "SellingPeriod": {"IAC": {"StartDate": "2020-05-03 00:00:00", "EndDate": "2020-08-01 23:59:59"}, "GMKT": {"StartDate": "2020-05-03 00:00:00", "EndDate": "2020-08-01 23:59:59"}, "History": []},

                //model
                "GoodsImage": {
                    "AdditionalImages": [{"Operation": "1", "Url": "http://image.esmplus.com/c/20200503/15/78ce40a882314bbe/0", "BigImage": "false", "ImageSourceCode": "0", "ImageSourceOriginId": ""}],
                    "PrimaryImage": {"Operation": "1", "Url": "http://image.esmplus.com/c/20200503/15/9d3f57295fc24a7c/0", "BigImage": "false", "ImageSourceCode": "0", "ImageSourceOriginId": ""},
                    "FixedImage": {"Operation": "1", "Url": "http://image.esmplus.com/c/20200503/15/9d3f57295fc24a7c/0", "BigImage": "false", "ImageSourceCode": "0", "ImageSourceOriginId": ""},
                    "AdditionalImagesSite": "0",
                    "AdditionalImagesStr": "[{\"Operation\":1,\"Url\":\"http://image.esmplus.com/c/20200503/15/78ce40a882314bbe/0\",\"BigImage\":\"false\",\"ImageSourceCode\":\"0\",\"ImageSourceOriginId\":\"\"}]"
                },
                "DescriptionType": "2",
                "DescriptionTypeSpecified": false,
                "Description": {
                    "InputType": "1",
                    "Text": "NewJpn",
                    "TextIAC": "",
                    "TextGMKT": ""
                },
                "NewDescription": {
                    "InputType": "1",
                    "Text": "%3Cdiv%20class%3D%22ee-contents%22%3E%3Cp%20class%3D%22%22%3E%EC%9D%98%EC%9E%90%EC%9E%85%EB%8B%88%EB%8B%A4.%3C%2Fp%3E%3Cp%3E%3Cbr%3E%3C%2Fp%3E%3Cp%3E%3Cbr%3E%3C%2Fp%3E%3C%2Fdiv%3E",
                    "TextEng": "",
                    "TextChn": "",
                    "TextJpn": "",
                    "TextIAC": "",
                    "TextGMKT": "",
                    "OuterShareYn": "N",
                    "OuterShareUrl": "",
                    "OuterShareNew": false,
                    "Height": "1183"
                },


                "ItemCode": "1234567890",

                "DeliveryInfo": {
                    "CommonDeliveryUseYn": true,
                    "InvalidDeliveryInfo": false,
                    "CommonDeliveryWayOPTSEL": "1",
                    "GmktDeliveryWayOPTSEL": "0",
                    "IsCommonGmktUnifyDelivery": false,
                    "GmktDeliveryCOMP": "100000014",
                    "IacDeliveryCOMP": "10001",
                    "IsCommonVisitTake": false,
                    "IsCommonQuickService": false,
                    "IsCommonIACPost": false,
                    "CommonIACPostType": "0",
                    "CommonIACPostPaidPrice": "0",
                    "IsGmktVisitTake": false,
                    "IsGmktQuickService": false,
                    "IsGmktTodayDEPAR": false,
                    "IsGmktTodayDEPARAgree": false,
                    "IsGmktVisitReceiptTier": false,
                    "MountBranchGroupSeq": "0",
                    "CommonVisitTakeType": "0",
                    "CommonVisitTakePriceDcAmnt": "0",
                    "CommonVisitTakeFreeGiftName": null,
                    "CommonVisitTakeADDRNo": null,
                    "CommonQuickServiceCOMPName": null,
                    "CommonQuickServicePhone": null,
                    "CommonQuickServiceDeliveryEnableRegionNo": null,
                    "ShipmentPlaceNo": "1229293",
                    "DeliveryFeeType": "1",
                    "BundleDeliveryYNType": "2",
                    "BundleDeliveryTempNo": "4795845",
                    "EachDeliveryFeeType": null,
                    "EachDeliveryFeeQTYEachGradeType": null,
                    "DeliveryFeeTemplateJSON": "{\"DeliveryFeeType\":0, \"DeliveryFeeSubType\":0, \"FeeAmnt\":0, \"PrepayIs\":false, \"CodIs\":false, \"JejuAddDeliveryFee\":3000, \"BackwoodsAddDeliveryFee\":6000, \"ShipmentPlaceNo\":1229293, \"DetailList\":[]}",
                    "EachDeliveryFeePayYn": null,
                    "IsCommonGmktEachADDR": false,
                    "ReturnExchangeADDRNo": "1823897",
                    "OldReturnExchangeADDR": null,
                    "OldReturnExchangeADDRTel": null,
                    "OldReturnExchangeSetupDeliveryCOMPName": null,
                    "OldReturnExchangeDeliveryFeeStr": null,
                    "ExchangeADDRNo": "",
                    "ReturnExchangeSetupDeliveryCOMP": null,
                    "ReturnExchangeSetupDeliveryCOMPName": null,
                    "ReturnExchangeDeliveryFee": "0",
                    "ReturnExchangeDeliveryFeeStr": "",
                    "IacTransPolicyNo": "594424",
                    "GmktTransPolicyNo": "594426",
                    "IsGmktIACPost": false
                },

                "Options": {
                    "InputType": "1",
                    "OptVerType": "0",
                    "OptVerTypeIAC": "0",
                    "OptVerTypeGMKT": "0",
                    "JsonData": null,
                    "JsonDataIAC": null,
                    "JsonDataGMKT": null,
                    "JsonDataLegacy": null
                },
                "OrderOption": {
                    "OptType": "1",
                    "StockMngIs": true,
                    "UnifyStockIs": false,
                    "OptionNameInfo": {
                        "OptName1": "색상",
                        "RcmdOptNo1": "1",
                        "OptionNameLangList": null
                    },
                    "OptionInfoList": [
                        {
                            "OptType": "1",
                            "OptValue1": "그린",
                            "RcmdOptValueNo1": "19391",
                            "SellerStockCode": null,
                            "SkuMatchingVerNo": "",
                            "OptionValueLangList": null,
                            "SiteOptionInfo": [
                                {
                                    "SiteId": "1",
                                    "ExposeYn": "Y",
                                    "SoldOutYn": "N",
                                    "StockQty": "100"
                                },
                                {
                                    "SiteId": "2",
                                    "ExposeYn": "Y",
                                    "SoldOutYn": "N",
                                    "StockQty": "100"
                                }
                            ],
                            "SkuList": []
                        },
                        {
                            "OptType": "1",
                            "OptValue1": "블루",
                            "RcmdOptValueNo1": "19396",
                            "SellerStockCode": null,
                            "SkuMatchingVerNo": "",
                            "OptionValueLangList": null,
                            "SiteOptionInfo": [
                                {
                                    "SiteId": "1",
                                    "ExposeYn": "Y",
                                    "SoldOutYn": "N",
                                    "StockQty": "100"
                                },
                                {
                                    "SiteId": "2",
                                    "ExposeYn": "Y",
                                    "SoldOutYn": "N",
                                    "StockQty": "100"
                                }
                            ],
                            "SkuList": []
                        }
                    ]
                },

                //여기서부터 기본 값
                "SellingStatus": "0",
                "GoodsStatus": "1",
                "UsedMonths": "",
                "IsGMKTEnvironmentFriendlyCertType": false,
                "IsIACEnvironmentFriendlyCertType": false,
                "PricePerUnit": {"Unit": "", "UnitPrice": "0"},
                "WirelessCallingPlan": {"PhoneFeeType": "0", "PhoneFeeUrl": "", "Plans": [], "MobilePhoneFeeUrl": ""},
                "MobileDevicePrice": {"PhoneDevicePrice": "", "PhoneSupportDiscount": "", "MakerSupportDiscount": "", "TeleComSupportDiscount": "", "PhoneAddDiscount": "", "PhoneInstallmentPrice": ""},
                "Additions": {"InputType": "1", "JsonData": null, "JsonDataIAC": null, "JsonDataGMKT": null, "JsonDataLegacy": null, "CommonGoodsNo": null, "IsUseCommonGoods": false},
                "AddonService": {"AddonServiceUseType": "0", "AddonServiceList": []},
                "CustCategoryNo": "0",
                "CustCategory": null,
                "ExpiryDate": null,
                "ExpiryDateSpecified": false,
                "ManufacturedDate": null,
                "ManufacturedDateSpecified": false,
                "LaunchingDate": null,
                "LaunchingDateSpecified": false,
                "Origin": {
                    "ProductType": "",
                    "Type": "0",
                    "Name": "",
                    "Code": "",
                    "IsMultipleOrigin": "false"
                },
                "LegacyRawMaterials": "null",
                "RawMaterials": "null",
                "Capacity": {
                    "Volume": null,
                    "Unit": "0",
                    "IsMultipleVolume": false
                },
                "Manual": null,
                "ECoupon": {"MoneyType": "0", "Price": "0", "Ratio": "0", "CouponName": null, "ExpireType": "0", "Expire1StartDate": "2020-05-03T06:27:59.633Z", "Expire1EndDate": "2020-05-03T06:27:59.633Z", "Expire2Start": "0", "Expire2Duration": "0", "UseTermType": "0", "UseTerm1StartDate": "2020-05-03T06:27:59.633Z", "UseTerm1EndDate": "2020-05-03T06:27:59.633Z", "UseTerm2Start": "0", "UseTerm2Duration": "0", "isDiffDate": false, "CouponTemplate": "0", "CouponImageUrl": null, "DownloadTemplate": "0", "DownloadImageUrl": null, "ApplyPlace": null, "ApplyPlaceKind": "BranchAddress", "AddressNo": null, "IsInformByAddress": false, "Address": null, "IsInformByURL": false, "URL": null, "ApplyPlacePriority": "0", "MobileUseInfo": null, "MobileHelpDeskphoneNo": null, "TelephoneNo": null, "AdditionalBenefit": null, "HasRestrictCondition": false, "RestrictCondition": null, "Guide": null, "PublicationCorp": null, "PublicationCorpURL": null, "IsCustomerNameView": false, "Period": "0"},
                "IsAdultProduct": "False",
                "IsVATFree": "False",
                "ASInfo": null,
                "CertIAC": {"HasIACCertType": false, "MedicalInstrumentCert": {"ItemLicenseNo": null, "AdDeliberationNo": null, "IsUse": false, "CertificationOfficeName": null, "CertificationNo": null, "Operation": "1"}, "BroadcastEquipmentCert": {"BroadcastEquipmentIs": false, "AddtionalConditionIs": false, "IsUse": false, "CertificationOfficeName": null, "CertificationNo": "", "Operation": "1"}, "FoodCert": {"IsUse": false, "CertificationOfficeName": null, "CertificationNo": null, "Operation": "1"}, "HealthFoodCert": {"AdDeliberationNo": null, "IsUse": false, "CertificationOfficeName": null, "CertificationNo": null, "Operation": "1"}, "EnvironmentFriendlyCert": {"CertificationType": "ENV_DTL", "isIACEnvironmentFriendlyCertType": false, "isGMKTEnvironmentFriendlyCertType": false, "CertBizType": "ENV_DTL", "ProducerName": null, "PresidentInfoNA": null, "RepItemName": null, "InfoHT": null, "CertGroupType": null, "InfoEM": null, "CertStartDate": null, "CertEndDate": null, "InfoAD": null, "CertificationOfficeName": null, "CertificationExpiration": null, "IsUse": false, "CertificationNo": null, "Operation": "1"}, "SafeCert": {"SafeCertType": "0", "AuthItemType": "0", "CertificationNo": null, "IsUse": false, "CertificationOfficeName": null, "Operation": "1"}, "ChildProductSafeCert": {"SafeCertType": "0", "ChangeType": "0", "SafeCertDetailInfoList": []}, "IntegrateSafeCert": {"ItemNo": null, "IntegrateSafeCertGroupList": [{"SafeCertGroupNo": "1", "CertificationType": "1"}, {"SafeCertGroupNo": "2", "CertificationType": "1"}, {"SafeCertGroupNo": "3", "CertificationType": "1"}]}},
                "CertificationNoGMKT": "",
                "LicenseSeqGMKT": [],
                "OfficialNotice": {
                    "NoticeItemGroupNo": "35",
                    "NoticeItemCodes": [
                        {
                            "NoticeItemCode": "35-1",
                            "NoticeItemValue": "상세페이지 참조"
                        },
                        {
                            "NoticeItemCode": "35-2",
                            "NoticeItemValue": "상세페이지 참조"
                        },
                        {
                            "NoticeItemCode": "35-3",
                            "NoticeItemValue": "상세페이지 참조"
                        },
                        {
                            "NoticeItemCode": "35-4",
                            "NoticeItemValue": "상세페이지 참조"
                        },
                        {
                            "NoticeItemCode": "35-5",
                            "NoticeItemValue": "상세페이지 참조"
                        },
                        {
                            "NoticeItemCode": "35-6",
                            "NoticeItemValue": "상세페이지 참조"
                        },
                        {
                            "NoticeItemCode": "999-5",
                            "NoticeItemValue": ""
                        }
                    ]
                },
                "ItemWeight": "0",
                "SkuList": [],
                "SkuMatchingVerNo": "0",
                "RentalAddInfo": null,
                "CertificationTextGMKT": "",
                "LicenseTextGMKT": null,
                "InventoryNo": null,
                "SingleSellerShop": null,
                "IsUseSellerFunding": null
            },
            "SYIStep3": {
                "G9RegisterCommand": "0",
                "IsG9Goods": false,
                "IsOnlyG9Goods": false,
                //model
                "SellerDiscount": {"DiscountAmtIac2": null, "DiscountAmtGmkt2": null, "IsUsed": "2", "IsUsedSpecified": false, "DiscountTypeSpecified": false, "DiscountAmtSpecified": false, "DiscountAmt1Specified": false, "DiscountAmt2": null, "DiscountAmt2Specified": false, "StartDateSpecified": false, "EndDateSpecified": false, "DiscountTypeSpecifiedIac": false, "StartDateSpecifiedIac": false, "IacEndDateSpecified": false, "DiscountAmtSpecifiedIac": false, "DiscountTypeSpecifiedGmkt": false, "StartDateSpecifiedGmkt": false, "EndDateSpecifiedGmkt": false, "DiscountAmtSpecifiedGmkt": false},

                "FreeGift": {"IsUsed": "2", "IsUsedSpecified": false, "IsOnly": "1", "IsOnlySpecified": false, "IacFreeGiftName": "", "GmkFreeGiftName": ""},
                "IsPcs": true,
                "IsPcsSpecified": true,
                "IacPcsCoupon": true,
                "IacPcsCouponSpecified": false,
                "GmkPcsCoupon": true,
                "GmkPcsCouponSpecified": false,
                "GmkBargain": false,
                "GmkBargainSpecified": false,
                "IacFreeWishKeyword": [],
                "IacDiscountAgreement": false,
                "IacDiscountAgreementSpecified": false,
                "GmkDiscountAgreement": false,
                "GmkDiscountAgreementSpecified": false,
                "GmkOverseaAgreementSeller": true,
                "GmkOverseaAgreementSellerSpecified": false,
                "IacBuyerBenefit": {"IsUsed": "2", "IsUsedSpecified": false, "StartDate": "2020-05-03T06:27:59.633Z", "StartDateSpecified": false, "EndDate": "2020-05-04T06:27:59.633Z", "EndDateSpecified": false, "IsMemberDiscount": false, "IsMemberDiscountSpecified": false, "MemberDiscountPrice": "0", "MemberDiscountPriceSpecified": false, "IsBulkDiscount": false, "IsBulkDiscountSpecified": false, "BulkDiscountQty": "0", "BulkDiscountQtySpecified": false, "BulkDiscountPrice": "0", "BulkDiscountPriceSpecified": false},
                "GmkBuyerBenefit": {"IsUsed": "2", "IsUsedSpecified": false, "Type": "", "StartDate": "2020-05-03T06:27:59.633Z", "StartDateSpecified": false, "EndDate": "2020-05-04T06:27:59.633Z", "EndDateSpecified": false, "ConditionType": "", "ConditionValue": "0", "ConditionValueSpecified": false, "Unit": "", "UnitValue": "0", "UnitValueSpecified": false, "WhoFee": ""},
                "GmkDonation": {"IsUsed": "2", "IsUsedSpecified": false, "StartDate": "2020-05-03T06:27:59.633Z", "StartDateSpecified": false, "EndDate": "2020-05-04T06:27:59.633Z", "EndDateSpecified": false, "DonationPrice": "0", "DonationPriceSpecified": false, "DonationMaxPrice": "0", "DonationMaxPriceSpecified": false, "DonationType": ""},
                "IacSellerPoint": {"IsUsed": "2", "IsUsedSpecified": false, "PointType": "1", "PointTypeSpecified": false, "Point": "0", "PointSpecified": true},
                "GmkSellerMileage": {"IsUsed": "2", "IsUsedSpecified": false, "PointType": "1", "PointTypeSpecified": false, "Point": "0", "PointSpecified": true},
                "IacChance": {"IsUsed": "2", "IsUsedSpecified": false, "StartDate": "2020-05-03T06:27:59.633Z", "StartDateSpecified": false, "EndDate": "2020-05-04T06:27:59.633Z", "EndDateSpecified": false, "ChanceQty": "0"},
                "IacDonation": {
                    "DonationMaxPrice": "0",
                    "DonationMaxPriceSpecified": false,
                    "DonationPrice": "0",
                    "DonationPriceSpecified": false,
                    "DonationType": "",
                    "EndDate": "2020-07-09T06:50:20.357Z",
                    "EndDateSpecified": false,
                    "IsUsed": "2",
                    "IsUsedSpecified": false,
                    "StartDate": "2020-07-08T06:50:20.357Z",
                    "StartDateSpecified": false
                },
                "IacBrandShop": {"IsUsed": "2", "IsUsedSpecified": false, "LCategoryCode": "", "MCategoryCode": "", "SCategoryCode": "", "BrandCode": "", "BrandName": "", "BrandImage": []},
                "GmkBizOn": {"IsUsed": "2", "IsUsedSpecified": false, "LCategoryCode": "", "MCategoryCode": "", "SCategoryCode": ""},
                "IacAdditional": [],
                "GmkAdditional": [],
                "IacPayWishKeyword": [],
                "IacAdPromotion": {"CategorySmart": {"LCategoryPrice": "0", "LCategoryPriceSpecified": false, "MCategoryPrice": "0", "MCategoryPriceSpecified": false, "SCategoryPrice": "0", "SCategoryPriceSpecified": false, "BestMainPrice": "0", "BestMainPriceSpecified": false}, "CategoryPower": {"LCategoryPrice": "0", "LCategoryPriceSpecified": false, "MCategoryPrice": "0", "MCategoryPriceSpecified": false, "SCategoryPrice": "0", "SCategoryPriceSpecified": false, "BestMainPrice": "0", "BestMainPriceSpecified": false}, "Best100Smart": {"LCategoryPrice": "0", "LCategoryPriceSpecified": false, "MCategoryPrice": "0", "MCategoryPriceSpecified": false, "SCategoryPrice": "0", "SCategoryPriceSpecified": false, "BestMainPrice": "0", "BestMainPriceSpecified": false}, "Chance": {"LCategoryPrice": "0", "LCategoryPriceSpecified": false, "MCategoryPrice": "0", "MCategoryPriceSpecified": false, "SCategoryPrice": "0", "SCategoryPriceSpecified": false, "BestMainPrice": "0", "BestMainPriceSpecified": false}, "AccessMode": "1", "AccessModeSpecified": false},
                "GmkAdPromotion": {"LargePlus": "0", "LargePlusSpecified": false, "LargePowerMini": "0", "LargePowerMiniSpecified": false, "LargeBestPower": "0", "LargeBestPowerSpecified": false, "MiddlePlus": "0", "MiddlePlusSpecified": false, "MiddlePower": "0", "MiddlePowerSpecified": false, "MiddleDetailPower": "0", "MiddleDetailPowerSpecified": false, "MiddleBestPower": "0", "MiddleBestPowerSpecified": false, "SmallPlus": "0", "SmallPlusSpecified": false, "SmallPower": "0", "SmallPowerSpecified": false},
                "OverseaAgree": {"Gubun": "0", "GubunSpecified": false, "OverseaDisAgreeIs": true, "RegType": null},
                "IsLeaseAvailableInIac": false,
                "GmktShopGroupCd": "0",
                "IsIacFreeWishKeyword": false,
                "IacFreeWishKeywordEndDate": false,
                "IacCommissionRate": "0",
                "IacCommissionRateOpenMarket": "0",
                "IacCommissionRateGroupBy": "0",
                "IsIacFeeDiscountItem": false,
                "IsDispExclude": true,
                "IsDispExcludeSpecified": false
            },
            "IsSingleGoods": false,
            "SiteGoodsNoIac": null,
            "SiteGoodsNoGmkt": null,
            "GoodsKind": "1",
            "BarCode": null,
            "IsSiteDisplayIac": false,
            "IsSiteDisplayGmkt": false,
            "SellingStatusIac": null,
            "SellingStatusGmkt": null,
            "MasterId": "448667",
            "LoginId": "conbus",
            "IsDeleteGroup": false,
            "EditorUseYn": "Y",
            "SdInfo": {
                "SdCategoryCode": "00370002000500020000",
                "SdBrandName": null,
                "SdMakerId": "0",
                "SdMakerName": null,
                "SdBrandId": "0",
                "SdProductBrandId": "0",
                "SdProductBrandName": null,
                "EpinCodeList": [],
                "SdAttrMatchingList": [],
                "SdBasicAttrMatching": {}
            },
            "BuyableQuantityMappingType": "1",
            "IsIacConvertToSingleGoods": false,
            "IsGmktConvertToSingleGoods": false,
            "AdminId": null
        })
    }

    initSYIStep1(productName, props) {
        let k = {}
        k['GoodsName'] = {
            "InputType": "1",
            "GoodsName": productName,
            "GoodsNameSearch": productName,
            "GoodsNamePrmt": "",
            "SiteGoodsName": [], "SiteGoodsNameEng": [{"key": "1", "value": ""}, {"key": "2", "value": ""}], "SiteGoodsNameChn": [{"key": "1", "value": ""}, {"key": "2", "value": ""}], "SiteGoodsNameJpn": [{"key": "1", "value": ""}, {"key": "2", "value": ""}], "UseSellerNicknameIac": false, "AdMessageIac": ""
        }
        let category = getRequired(props, 'category')
        k['SiteCategoryCode'] = category['SiteCategoryCode']
        if (category['SdCategoryCode']) {
            this['SdInfo']['SdCategoryCode'] = category['SdCategoryCode']
        }
        mixin(this['SYIStep1'], k)
    }

    initSYIStep2(props) {
        let k = {}
        k['Price'] = {
            "GoodsPrice": `${getRequired(props, 'originalPrice')}`,
            "InputType": "1", "GoodsPriceIAC": "", "GoodsPriceGMKT": "", "IsUserCustomSettlementGMKT": false, "GoodsPriceSettlementGMKT": "0", "BookPrice": "0", "OrgGoodsPrice": "0"
        }

        k['Stock'] = {
            "GoodsCount": `${getRequired(props, 'quantity') * 2}`,
            "GoodsCountIAC": `${getRequired(props, 'quantity')}`,
            "GoodsCountGMKT": `${getRequired(props, 'quantity')}`,
            "BuyableQuantity": `${getRequired(props, 'maximumBuyForPerson')}`,
            "BuyableQuantityDay": `${getRequired(props, 'maximumBuyForPersonPeriod')}`,

            "InputType": "2", "BuyableQuantityType": "3", "SiteGoodsCountNo": "0", "OldGoodsCount": "0", "OldGoodsCountIAC": "0", "OldGoodsCountGMKT": "0"
        }

        k['PreSale'] = {"UseSettingIAC": false, "SaleStartDateIAC": getRequired(props, 'startDate')},
        k['SellingPeriod'] = {
            "IAC": {
                "StartDate": `${getRequired(props, 'startDate')} 00:00:00`,
                "EndDate": `${getRequired(props, 'endDate')} 23:59:59`
            },
            "GMKT": {
                "StartDate": `${getRequired(props, 'startDate')} 00:00:00`,
                "EndDate": `${getRequired(props, 'endDate')} 23:59:59`
            },
            "History": []
        }

        k['GoodsImage'] = getRequired(props, 'images')
        k['ItemCode'] = props['itemCode'] || ""
        mixin(k, getRequired(props, 'description'))
        mixin(k, getRequired(props, 'options'))
        mixin(this['SYIStep2'], k)
    }

    initSYIStep3(props) {
        let k = {}
        let discountAmount = `${getRequired(props, 'originalPrice') - getRequired(props, 'salePrice')}`
        if (discountAmount == '0') {
            k['SellerDiscount'] = {"DiscountAmtIac2": null, "DiscountAmtGmkt2": null, "IsUsed": "2", "IsUsedSpecified": false, "DiscountTypeSpecified": false, "DiscountAmtSpecified": false, "DiscountAmt1Specified": false, "DiscountAmt2": null, "DiscountAmt2Specified": false, "StartDateSpecified": false, "EndDateSpecified": false, "DiscountTypeSpecifiedIac": false, "StartDateSpecifiedIac": false, "IacEndDateSpecified": false, "DiscountAmtSpecifiedIac": false, "DiscountTypeSpecifiedGmkt": false, "StartDateSpecifiedGmkt": false, "EndDateSpecifiedGmkt": false, "DiscountAmtSpecifiedGmkt": false}
        } else {
            k['SellerDiscount'] = {
                "DiscountAmtIac1": discountAmount, "DiscountAmtGmkt1": discountAmount, "DiscountAmt": discountAmount, "DiscountAmt1": discountAmount, "DiscountAmtIac": discountAmount, "DiscountAmtGmkt": discountAmount,
                "StartDate":getRequired(props, 'startDate'), "StartDateIac":getRequired(props, 'startDate'), "StartDateGmkt":getRequired(props, 'startDate'),
                "DiscountAmtIac2":null, "DiscountAmtGmkt2":null, "IsUsed":1, "IsUsedSpecified":false, "DiscountType":"1", "DiscountTypeSpecified":false, "DiscountAmtSpecified":false, "DiscountAmt1Specified":false, "DiscountAmt2":null, "DiscountAmt2Specified":false, "StartDateSpecified":false, "EndDate":"9999-12-31", "EndDateSpecified":false, "DiscountTypeIac":"1", "DiscountTypeSpecifiedIac":false, "StartDateSpecifiedIac":false, "EndDateIac":"9999-12-31", "IacEndDateSpecified":false, "DiscountAmtSpecifiedIac":false, "DiscountTypeGmkt":"1", "DiscountTypeSpecifiedGmkt":false, "StartDateSpecifiedGmkt":false, "EndDateGmkt":"9999-12-31", "EndDateSpecifiedGmkt":false, "DiscountAmtSpecifiedGmkt":false}
        }

        mixin(this['SYIStep3'], k)
    }
}

let copyProps = (target, source) => {  // this function copies all properties and symbols, filtering out some special ones
    Object.getOwnPropertyNames(source)
        .concat(Object.getOwnPropertySymbols(source))
        .forEach((prop) => {
            if (!prop.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/))
                Object.defineProperty(target, prop, Object.getOwnPropertyDescriptor(source, prop));
        })
}
let mixin = (target, source) => {
    if (target && source) {
        copyProps(target, JSON.parse(JSON.stringify(source)));
    }
}

let generateESMOptionHtml = function(taobao, item) {
    let skus = []
    if (item.hasOptions) {
        skus = item.optionItems.map(i => i.sku)
    } else {
        skus.push(item.sku)
    }

    let propPaths = skus.map(sku => sku.propPath.split(';'))
    propPaths = _.uniq(_.flatten(propPaths))
    return propPaths.map(path => {
        let [pid, vid] = path.split(':')
        let option = ((taobao.skuProps.find(p => p.pid == pid) || {})
            .values || []).find(v => v.vid == vid)
        if (option && option.image) {
            if (option.image.indexOf('http') != 0) {
                option.image = 'http:' + option.image
            }
            return {name:option.customName, image: option.image}
        }
    }).filter(v => v)
        .map(v => {
            return `
<div style="text-align:center;padding:20px;margin-bottom:120px;">
  <h3 style="text-align:center;font-size:28px;margin-bottom: 20px;background-color: #ffffbc !important;padding:12px 0px;">${v['name']}</h3>
  <p style="text-align:center;padding:0px;margin:0px;">
    <img src="${v['image']}" style="max-width:90%">
  </p>
</div>`
        }).join('\n')
}

export function generateESMProductFromTaobao(taobao, esmProfile, item, delivery, deliveryTemplateNo) {
    let profile = esmProfile.data
    let images
    if (item.images) {
        images = new ESMImages(item.images)
    } else {
        images = new ESMImages(taobao.images)
        if (!item.hasOptions && item.sku && item.sku.images && item.sku.images.length > 0) {
            images = new ESMImages(_.uniq([item.sku.images[0], ...taobao.images]))
        }
    }
    let category = new ESMCategory(taobao.iacCategory, taobao.gmktCategory, taobao.esmCategory)

    let optionHtml = generateESMOptionHtml(taobao, item)
    if (optionHtml) {
        optionHtml = optionHtml.trim()
    }
    let description = new ESMDescription(taobaoContentHtml(taobao, {optionHtml}))
    let options = new ESMOptions(item)
    let itemCode = item.customProductId
    let originalPrice = item.salePrice
    let salePrice = item.salePrice
    let quantity = 10000
    if (item.sku && item.sku.hasOwnProperty('quantity')) {
        quantity = item.sku.quantity
    }
    let maximumBuyForPerson = delivery.maximumBuyForPerson
    let maximumBuyForPersonPeriod = delivery.maximumBuyForPersonPeriod
    let startDate = new Date().toISOString().split('T')[0]
    let endDate = new Date(+new Date() + 86400000 * 360).toISOString().split('T')[0]
    let product = new ESMProduct(item.title, profile, {
        category,
        options,
        originalPrice,
        salePrice,
        quantity,
        images,
        description,
        maximumBuyForPerson,
        maximumBuyForPersonPeriod,
        startDate,
        endDate,
        itemCode
    })

    if (delivery) {
        let fee = Math.max(parseInt(delivery.refund), parseInt(delivery.change))
        product['SYIStep2']['DeliveryInfo']['ReturnExchangeDeliveryFee'] = fee
        product['SYIStep2']['DeliveryInfo']['ReturnExchangeDeliveryFeeStr'] = `${fee}`
    }
    if (deliveryTemplateNo) {
        product['SYIStep2']['DeliveryInfo']['BundleDeliveryTempNo'] = deliveryTemplateNo + ''
        if (!product['SYIStep2']['DeliveryInfo']['DeliveryFeeType']) {
            product['SYIStep2']['DeliveryInfo']['DeliveryFeeType'] = '1'
        }
        if (!product['SYIStep2']['DeliveryInfo']['BundleDeliveryYNType']) {
            product['SYIStep2']['DeliveryInfo']['BundleDeliveryYNType'] = '2'
        }

    }


    if (item.published && item.published['result']  && item.published['result']['masterId']) {
        let useIac = esmProfile.useMarket.indexOf('옥션') >= 0
        let useGmkt = esmProfile.useMarket.indexOf('G마켓') >= 0
        let model = {
            "GoodsNo": item.published['result']['masterId'],
            "CommandType": "2",
            "SYIStep1": {
                "GmktShopKind1": useGmkt ? "0" : "-1",
                "GmktShopKind2": useGmkt ? "28" : "-1",
                "GmktShopKind3": useGmkt ? "28" : "-1",
                'StatusCode': '1',
                'AdminRestrict': 'N'
            },
            "SYIStep2": {
                "SellingStatus": useIac ? "11" : "N",
                "Price": {
                    "InputType": "1",
                    "GoodsPrice": `${originalPrice}`,
                    "GoodsPriceIAC": useIac ? `${originalPrice}` : "",
                    "GoodsPriceGMKT": useGmkt ? `${originalPrice}` : "",
                    "IsUserCustomSettlementGMKT": false,
                    "GoodsPriceSettlementGMKT": "0",
                    "BookPrice": "0",
                    "OrgGoodsPrice": `${item.published['originalPrice'] || originalPrice}`
                },
                "Stock": {
                    "InputType": "2",
                    "SiteGoodsCountNo": "0",
                    "BuyableQuantityType": "3",
                    "BuyableQuantity": `${maximumBuyForPerson}`,
                    "BuyableQuantityDay": `${maximumBuyForPersonPeriod}`,
                    "GoodsCount": `${quantity*2}`,
                    "GoodsCountIAC": useIac ? `${quantity}` : "",
                    "GoodsCountGMKT": useGmkt ? `${quantity}` : "",
                    "OldGoodsCount": `${(item.published['quantity'] || quantity)*2}`,
                    "OldGoodsCountIAC": useIac ? `${item.published['quantity']}` : "0",
                    "OldGoodsCountGMKT": useGmkt ? `${item.published['quantity']}`: "0"
                },
                "SellingPeriod": {
                    "IAC": {
                        "StartDate": "",
                        "EndDate": ""
                    },
                    "GMKT": {
                        "StartDate": "",
                        "EndDate": ""
                    },
                    "History": [
                        {
                            "StartDate": `${item.published['startDate']}T00:00:00.000Z`,
                            "StartDateSpecified": true,
                            "EndDate": `${item.published['endDate']}T23:59:59.000Z`,
                            "EndDateSpecified": true
                        }
                    ]
                }
            },
            "SYIStep3": {
                "IacPcsCoupon": useIac,
                "GmkPcsCoupon": useGmkt,
            },
            "IsSingleGoods": true,
            "SiteGoodsNoIac": useIac ? item.published['result']['iacId'] : null,
            "SiteGoodsNoGmkt": useGmkt ? item.published['result']['gmktId'] : null,
            "IsSiteDisplayIac": useIac,
            "IsSiteDisplayGmkt": useGmkt,
            "SellingStatusIac": useIac ? "11": "N",
            "SellingStatusGmkt": useGmkt ? "11": "N"
        }

        for (let key of Object.keys(model)) {
            if (_.isObject(model[key])) {
                _.extendOwn(product[key], model[key])
            } else {
                product[key] = model[key]
            }
        }
    }
    return {
        json: JSON.parse(product.json),
        category,
        options,
        originalPrice,
        salePrice,
        quantity,
        images,
        description,
        maximumBuyForPerson,
        maximumBuyForPersonPeriod,
        startDate,
        endDate
    }
}


let test = function() {
    let images = new ESMImages(["http://image.esmplus.com/t/20200525/17/a70dc9ae29264454.PNG"])
    let category = new ESMCategory('123', '456')
    let description = new ESMDescription('html')
    let options = new ESMOptions()
    let originalPrice = 12000
    let salePrice = 10000
    let quantity = 100
    let maximumBuyForPerson = 1
    let maximumBuyForPersonPeriod = 15
    let product = new ESMProduct("새로운 상품 입니다.", {},{
        category,
        options,
        originalPrice,
        salePrice,
        quantity,
        images,
        description,
        maximumBuyForPerson,
        maximumBuyForPersonPeriod})
    console.log(product)
}
